<!DOCTYPE html>
<html lang="en">
<head>

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>ShopCRM v2</title>

<link rel="manifest" href="manifest.json">

<style>

body{
font-family:Arial;
margin:0;
background:#f4f6f9;
}

header{
background:#1f2937;
color:white;
padding:15px;
font-size:20px;
}

.container{
padding:20px;
}

.card{
background:white;
padding:20px;
border-radius:10px;
margin-bottom:20px;
box-shadow:0 2px 6px rgba(0,0,0,0.1);
}

input,select{
width:100%;
padding:10px;
margin-top:10px;
}

button{
background:#2563eb;
color:white;
border:none;
padding:10px;
margin-top:10px;
border-radius:6px;
cursor:pointer;
}

table{
width:100%;
border-collapse:collapse;
margin-top:10px;
}

td,th{
border:1px solid #ddd;
padding:8px;
}

</style>

</head>

<body>

<header>
ShopCRM v2 Dashboard
</header>

<div class="container">

<div class="card">

<h3>Create Invoice</h3>

<input id="customer" placeholder="Customer Name">

<input id="mobile" placeholder="Mobile">

<input id="product" placeholder="Product">

<input id="qty" placeholder="Qty">

<input id="rate" placeholder="Rate">

<input id="gst" placeholder="GST %">

<button onclick="createInvoice()">Generate Invoice</button>

</div>


<div class="card">

<h3>Invoices</h3>

<table id="invoiceTable">

<tr>

<th>Customer</th>
<th>Product</th>
<th>Total</th>

</tr>

</table>

</div>

</div>


<script>

function calc(qty,rate,gst){

qty=parseFloat(qty)||0

rate=parseFloat(String(rate).replace(/,/g,''))||0

gst=parseFloat(gst)||0

let sub=qty*rate
let gstAmt=sub*gst/100
let total=sub+gstAmt

return total

}


function createInvoice(){

let c=document.getElementById("customer").value
let m=document.getElementById("mobile").value
let p=document.getElementById("product").value
let q=document.getElementById("qty").value
let r=document.getElementById("rate").value
let g=document.getElementById("gst").value

let total=calc(q,r,g)

let inv={
customer:c,
mobile:m,
product:p,
total:total
}

let data=JSON.parse(localStorage.getItem("invoices")||"[]")

data.push(inv)

localStorage.setItem("invoices",JSON.stringify(data))

loadInvoices()

if(m){

window.open("https://wa.me/"+m+"?text=Your Invoice Amount ₹"+total)

}

}


function loadInvoices(){

let table=document.getElementById("invoiceTable")

table.innerHTML="<tr><th>Customer</th><th>Product</th><th>Total</th></tr>"

let data=JSON.parse(localStorage.getItem("invoices")||"[]")

data.forEach(i=>{

table.innerHTML+=`<tr>

<td>${i.customer}</td>

<td>${i.product}</td>

<td>₹${i.total}</td>

</tr>`

})

}


loadInvoices()

</script>


</body>

</html>
